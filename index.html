<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>앱 설치 안내</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            color: #333;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background-color: #007bff;
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #0056b3;
        }
        #contentSection {
            background-color: white;
            border-radius: 5px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>우리 앱을 설치해주세요</h1>
    </div>
    <div class="container">
        <p>더 나은 경험을 위해 앱을 설치해 주세요.</p>
        <div id="appButtons">
            <a href="#" id="installAndroid" class="btn" style="display: none;">Android 앱 설치</a>
            <a href="#" id="installIOS" class="btn" style="display: none;">iOS 앱 설치</a>
        </div>
        <div id="contentSection">
            <h2>공유된 콘텐츠</h2>
            <div id="loader" class="loader"></div>
            <p id="sharedContent" style="display: none;"></p>
        </div>
    </div>

    <script>
        // URL에서 파라미터 추출
        const urlParams = new URLSearchParams(window.location.search);
        const screenId = urlParams.get('screenId');

        // 사용자 기기 감지
        function detectUserAgent() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            if (/android/i.test(userAgent)) {
                document.getElementById('installAndroid').style.display = 'inline-block';
            } else if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                document.getElementById('installIOS').style.display = 'inline-block';
            } else {
                document.getElementById('installAndroid').style.display = 'inline-block';
                document.getElementById('installIOS').style.display = 'inline-block';
            }
        }

        // 앱 스토어 링크 설정
        document.getElementById('installAndroid').href = 'https://play.google.com/store/apps/details?id=skplanet.musicmate';
        document.getElementById('installIOS').href = 'https://apps.apple.com/app/id1129048043';

        // 공유된 콘텐츠 표시
        function fetchSharedContent(id) {
            // 실제 구현에서는 서버 API를 호출하여 데이터를 가져옵니다.
            // 여기서는 예시로 setTimeout을 사용하여 비동기 작업을 시뮬레이션합니다.
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('sharedContent').style.display = 'block';
                document.getElementById('sharedContent').textContent = `스크린 ID ${id}에 해당하는 콘텐츠입니다. 앱에서 더 자세한 정보를 확인하세요.`;
            }, 2000);
        }

        // 초기화
        detectUserAgent();
        if (screenId) {
            fetchSharedContent(screenId);
        } else {
            document.getElementById('loader').style.display = 'none';
            document.getElementById('sharedContent').style.display = 'block';
            document.getElementById('sharedContent').textContent = '공유된 콘텐츠 정보를 찾을 수 없습니다.';
        }
    </script>
</body>
</html>